<h1>Passenger Info</h1>

<div class="notice">
  <%= flash[:notice] %>
</div>

<div class="left">
  <ul class="info">
    <li>
      Name: <%=@passenger[:name] %>
    </li>
    <li>
      Phone Number: <%= @passenger[:phone_num] %>
    </li>
    <li>
      Total Spent: <%= number_to_currency(@passenger.total_cost, precision: 2) %>
    </li>
  </ul>

  <div class="buttons">
    <%=link_to("Edit Passenger", edit_passenger_path(@passenger.id)) %>
    <%= link_to("Delete Passenger", delete_passenger_path, method: :delete, data: { confirm: "Are you sure?" }) %>
    <%= link_to("New Trip", create_trip_passenger_path(@passenger.id), method: :post) %>
  </div>

</div>

<div class="right">
  <table class="trips-list">
    Trips
    <tr>
      <th>
        Date
      </th>
      <th>
        Cost
      </th>
      <th>
        Rating
      </th>
    </tr>
    <% @trips.each do |trip| %>
    <tr>
      <td>
        <%= link_to trip.date, trip_path(trip.id) %>
      </td>
      <td>
        <%= link_to number_to_currency(trip.cost, precision: 2), trip_path(trip.id) %>
      </td>
      <% @rated = trip.rating == nil || trip.rating == 0 ? "unrated" : "rated" %>
      <% @rating = @rated == "rated" ? trip.rating : "Rate Trip" %>
      <% @path = @rated == "rated" ? trip_path(trip.id) : edit_trip_path(trip.id) %>
      <td class="<%= @rated %>">
        <%= link_to @rating, @path %>
      </td>
    </tr>
    <% end %>
  </table>

  <!-- <li>
    Trips
    <ul>
      <% @trips.each do |trip| %>
      <li>
        <%= link_to("Date: #{trip.date}", trip_path(trip.id)) %>
      </li>
      <li>
        <% @rated = trip.rating == nil || trip.rating == 0 ? "unrated" : "rated" %>
        Rating: <span class="<%=@rated%>"><%= trip.rating %></span>
        <% if @rated == "unrated" %>
          <%=link_to("Rate Trip", edit_trip_path(trip.id))%>
        <% end %>
      </li>
      <li>
        Cost: <%= number_to_currency(trip.cost, precision: 2) %>
      </li>
      <% end %>
    </ul>
  </li> -->
</div>
